<!DOCTYPE html>
<html>
  <head>
    <title>新增video</title>
	
     <meta charset="UTF-8">
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <!--<link rel="stylesheet" type="text/css" href="./styles.css">-->
	 <link rel="stylesheet" href="/static/frame/layui/css/layui.css">
    <link rel="stylesheet" href="/static/frame/static/css/style.css">
    <link rel="icon" href="/static/frame/static/image/code.png">
  </head>
  <script src="/static/js/jquery.min.js" type="text/javascript"></script>
  <link rel="stylesheet" type="text/css" href="/static/css/bootstrap.min.css"  th:href="@{/static/css/bootstrap.min.css}"/>
  <link rel="stylesheet" type="text/css"  th:href="@{/static/css/style.css}" href="/static/css/style.css"  />
	<link rel="stylesheet" type="text/css" href="/static/css/responsive.css" th:href="@{/static/css/responsive.css}"/>
	<link rel="stylesheet" type="text/css" href="/static/css/color.css" th:href="@{/static/css/color.css}"/>

	<!-- REVOLUTION STYLE SHEETS -->
	<link rel="stylesheet" type="text/css" href="/static/revolution/css/settings.css"  th:href="@{/static/revolution/css/settings.css}" >
<style>
input, textarea {
    float: left;
    width: 100%;
    height: 10px;
    background: #fbfbfb;
    padding: 20px 40px;
    font-family: montserrat;
    font-size: 12px;
    color: #8c8c8c;
    border: 0;
    margin-bottom: 5px;
    -webkit-border-radius: 40px;
    -moz-border-radius: 40px;
    -ms-border-radius: 40px;
    -o-border-radius: 40px;
    border-radius: 40px;
}

</style>
  <body>
  
  <div th:include="views/admin/adminheads :: copy"></div> 

<hr class="layui-bg-gray">
<hr class="layui-bg-gray">
 <!-- id, name, status, price, num, createdate, videopath, descirption, type -->
	<div class="col-xs-12">
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    <div class="card-title">
                                        <div class="title">video</div>
                                    </div>
                                </div>
                                <div class="panel-body">
                                    <form class=""  id="registerform" action="/addvideo" >
                                        <div class="form-group">
                                            <label for="exampleInputEmail1">name</label>
                                            <input type="text" name="name" id="name" class="form-control"  placeholder="name">
                                        </div>
                                        <div class="form-group">
                                            <label for="exampleInputPassword1">price</label>
                                            <input type="text" name="price" id="price" class="form-control"  placeholder="price">
                                        </div>
                                        <div class="form-group">
                                            <label for="exampleInputPassword1">num</label>
                                            <input type="text" name="num" id="num" class="form-control"  placeholder="num">
                                        </div>
                                        <div class="form-group">
                                            <label for="exampleInputPassword1">descirption</label>
                                            <input type="text" name="descirption" id="descirption" class="form-control"  placeholder="descirption">
                                        </div>
                                         <div class="form-group">
                                            <label for="exampleInputPassword1">type</label>
                                            <input type="text" name="type" id="type" class="form-control"  placeholder="type">
                                        </div>
                                        <div class="form-group">
                                            <label for="exampleInputFile">videopath</label>
                                            <input type="file" name="file" id="file">
                                            <p class="help-block">上传视频</p>
                                        </div>
                                       
                                    </form>
                                     <button id="submitAdd" class="btn btn-default">Submit</button>
                                </div>
                            </div>
                        </div>
 <!--  <div class="layui-col-lg4 layui-col-lg-offset4">
    偏移4列，从而在最右
  </div> -->

<!-- <div th:include="views/admin/adminfooter :: foot"></div>  -->
  </body>
  
</html>
<script>
$(document).ready(function(){
 /*    $("div").html("");
    $("a").click(function(){
//add your code here
    }) */
    $("#submitAdd").click(function(){
	  var targetUrl = $("#registerform").attr("action");    
	  var data = $("#registerform").serialize();
	   var filepath=$("input[name='file']").val();
            var extStart=filepath.lastIndexOf(".");
            var ext=filepath.substring(extStart,filepath.length).toUpperCase();
             
            if(ext!=".MP4"&&ext!=".AVI"&&ext!=".MKV"&&ext!=".RMVB"&&ext!=".RM"){
                 alert("视频限于mkv, mp4, avi, rm, rmvb格式");
                 return false;
            }
	  var formData = new FormData($("#registerform")[0]);
	    $.ajax({
	        //接口地址
	        url: targetUrl ,
	        type: 'POST',
	        data: formData,
	        async: false,
	        cache: false,
	        contentType: false,
	        processData: false,
	        success: function (data) {
	            //成功的回调
	            if(data.state==1){
		    		 alert('文件上传 success');
		    		 setTimeout(function(){ window.open("video_list.html","_self"); }, 2000); 
		    	}else{
		    		 alert('文件上传 error，Please check if the input is correct');
		    	}
	
	        },
	        error: function (data) {
	           //请求异常的回调
	           alert("文件上传 error，Please check if the input is correct ")
	        }
	    });
	    return false;
	})
})
	
</script>

