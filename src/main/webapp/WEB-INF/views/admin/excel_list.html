<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>地图插件</title>
    <link rel="stylesheet" href="/static/frame/layui/css/layui.css">
    <link rel="stylesheet" href="/static/frame/static/css/style.css">
    <link rel="icon" href="/static/frame/static/image/code.png">
</head>
<body class="body">
<div th:include="views/admin/adminheads :: copy"></div> 

<hr class="layui-bg-gray">
<hr class="layui-bg-gray">
<p></p>
<div class="demoTable" style="padding-left:120px;">
    <label class="layui-form-label">单行选择框</label>
    <div class="layui-inline">
      <select name="myselect" id="myselect" lay-filter="aihao">
        <option value=""></option>
        <option value="1" selected="">按照月份</option>
        <option value="2">按照季度</option>
        <option value="3">按照年</option>
      </select>
    </div>
    <!-- <button class="layui-btn" onclick="function add()"  >搜索</button> -->
</div>

<!-- 为 ECharts 准备一个具备大小（宽高）的 DOM -->
<div id="main-line" style="width: 100%;height:600px;"></div>

<div id="main-bing" style="width: 100%;height:400px;"></div>

<!-- <script type="text/javascript" src="/static/js/echarts.js"></script> -->
<script type="text/javascript" src="/static/frame/echarts/echarts.min.js"></script>
<script type="text/javascript" src="/static/js/jquery-1.8.3.js"></script>
<script type="text/javascript" src="/static/frame/layui/layui.js"></script>
	 <link rel="stylesheet" href="/static/frame/layui/css/layui.css">
<script type="text/javascript">
$("#myselect").change(function(){
    var opt=$("#myselect").val();
    var options=$("#myselect option:selected");  //获取选中的项
alert(opt); 
/* alert(options.val());   //拿到选中项的值

alert(options.text());   //拿到选中项的文本 */
$.ajax({
	url : "/echarts",
	type : "POST",
	dataType : "JSON",
	data: {id:options.val()},
	success : function(data) {//这里得到后台Java响应的json数据,即resultJson
		 // 基于准备好的dom，初始化echarts实例
	    var myChart = echarts.init(document.getElementById('main-line'));
	   /*  var data1 =  $.parseJSON(data); */ //此处代码很关键，后台返回的JSON字符串数据ECharts是无法直接解析的，必须
	    var option = {
	    		title: {
	                text: '收入统计'
	            },
	            tooltip: {},
	            legend: {
	                data:['数量']
	            },
	            xAxis: {
	                data: data.desc
	            },
	            yAxis: {},
	            series: [{
	                name: '数量',
	                type: 'bar',
	                data: data.num
	            }]
	  		};
	    
		myChart.setOption(option);
		
	},
	error : function(errorMsg) {
        //请求失败时执行该函数
		layer.msg('服务器开了点小差，请稍后刷新页面!', {icon: 0});
        myChart.hideLoading();
    }
});

});

function add(){
  var d=("#select1  option:selected").text();
  alert(d);


}

   $.ajax({
	url : "/echarts",
	type : "POST",
	dataType : "JSON",
	data: {id:1},
	success : function(data) {//这里得到后台Java响应的json数据,即resultJson
		 // 基于准备好的dom，初始化echarts实例
	    var myChart = echarts.init(document.getElementById('main-line'));
	   /*  var data1 =  $.parseJSON(data); */ //此处代码很关键，后台返回的JSON字符串数据ECharts是无法直接解析的，必须
	    var option = {
	    		title: {
	                text: '输入统计'
	            },
	            tooltip: {},
	            legend: {
	                data:['数量']
	            },
	            xAxis: {
	                data: data.desc
	            },
	            yAxis: {},
	            series: [{
	                name: '数量',
	                type: 'bar',
	                data: data.num
	            }]
	  		};
	    
		myChart.setOption(option);
		
	},
	error : function(errorMsg) {
        //请求失败时执行该函数
		layer.msg('服务器开了点小差，请稍后刷新页面!', {icon: 0});
        myChart.hideLoading();
    }
});
</script>
</body>
</html>