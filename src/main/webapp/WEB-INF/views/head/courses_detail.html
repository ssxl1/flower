<!DOCTYPE html>
<html class="no-js">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<title>Courses</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="description" content="" />
	<meta name="keywords" content="" />

	<!-- Styles -->
	<link rel="stylesheet" type="text/css" href="/static/css/bootstrap.min.css"  th:href="@{/static/css/bootstrap.min.css}"/>
	<link rel="stylesheet" href="/static/css/icons.css">
	<link rel="stylesheet" type="text/css"  th:href="@{/static/css/style.css}" href="/static/css/style.css"  />
	<link rel="stylesheet" href="/static/css/course.css">
	<link rel="stylesheet" href="/static/css/course2.css">
	<link rel="stylesheet" href="/static/css/course_detail.css">
	<link rel="stylesheet" type="text/css" href="/static/css/responsive.css" th:href="@{/static/css/responsive.css}"/>
	<link rel="stylesheet" type="text/css" href="/static/css/color.css" th:href="@{/static/css/color.css}"/>
</head>
<script src="/static/js/jquery.min.js" type="text/javascript"></script>
<script src="/static/js/owl.carousel.min.js"></script>
	<script src="/static/js/html5lightbox.js"></script>
	<script src="/static/js/script.js" type="text/javascript"></script>
	<script src="/static/js/layer/layer.js" type="text/javascript"></script>
	<script src="/static/js/laypage/laypage.js" type="text/javascript"></script>
	<style>
	.btn-success {
    color: #fff;
    background-color: #5cb85c;
    border-color: #4cae4c;
}
	</style>
<body>
	<div class="theme-layout">
		<header>
		<div th:include="views/head/heads :: copy"></div> 
		</header><!-- Header -->

		<div class="responsive-header">
			<div class="topbar">
				<span>For Free Consultation: <i>+(011) 345 6789</i></span>
				<span>
					Stay Connected: 
					<span class="socials">
						<a href="#" title=""><i class="fa fa-facebook"></i></a>
						<a href="#" title=""><i class="fa fa-twitter"></i></a>
						<a href="#" title=""><i class="fa fa-linkedin"></i></a>
					</span>
				</span>

				<div class="registration">
					<a href="#" title="">Register</a> <a href="#" title="">Sign in</a>
				</div>
			</div><!-- Top Bar -->
		
			<div class="responsive-logobar">
				<div class="responsive-logo"><a href="#" title=""><img src="/static/images/logo.png" alt="" /></a></div>
				<a class="menu-button" href="#" title=""><i class="fa fa-bars"></i></a>
			</div><!-- Responsive Logbar -->
			<div class="responsive-menu">
				<a class="close-menu" href="#" title=""><i class="fa fa-remove"></i></a>
				<ul>
					<li><a href="#" title="">Home</a>
						<ul>
							<li><a href="index.html" title="">Homepage Style 1</a></li>
							<li><a href="index2.html" title="">Homepage Style 2</a></li>
						</ul>
					</li>
					<li><a href="#" title="">Pages</a>
						<ul>
							<li><a href="blog.html" title="">Blog</a>
								<ul>
									<li><a href="blog.html" title="">Blog Page</a></li>
									<li><a href="blog-details.html" title="">Blog Detail Page</a></li>
								</ul>
							</li>
							<li><a href="events.html" title="">Events</a>
								<ul>
									<li><a href="events.html" title="">Events Page</a></li>
									<li><a href="event-detail.html" title="">Event Detail Page</a></li>
								</ul>
							</li>
							<li><a href="team.html" title="">Team</a>
								<ul>
									<li><a href="team.html" title="">Team Page</a></li>
									<li><a href="team-detail.html" title="">Team Detail Page</a></li>
								</ul>
							</li>
						</ul>
					</li>
					<li><a href="courses.html" title="">Courses</a>
						<ul>
							<li><a href="courses.html" title="">Courses Page Style 1</a></li>
							<li><a href="courses2.html" title="">Courses Page Style 2</a></li>
							<li><a href="course-detail.html" title="">Courses Detail</a></li>
						</ul>
					</li>
					<li><a href="gallery1.html" title="">Gallery Styles</a>
						<ul>
							<li><a href="gallery1.html" title="">Gallery Style 1</a></li>
							<li><a href="gallery2.html" title="">Gallery Style 2</a></li>
							<li><a href="gallery3.html" title="">Gallery Style 3</a></li>
						</ul>
					</li>
					<li><a href="about.html" title="">About Us</a></li>
					<li><a href="contact.html" title="">Contact Us</a></li>
				</ul>
			</div>			
		</div><!-- Responsive Header -->

		<div class="pagetop">
			<img src="/static/images/resource/pagetop.jpg" alt="" />
			<div class="pagetop-inner">
				<div class="container">
					<h1>Courses</h1>
					<ul class="breadcrumbs">
						<li><a href="index.html" title=""><i class="fa fa-home"></i> Home</a></li>
						<li>Detail</li>
					</ul>
				</div>
			</div>
		</div><!-- PageTop -->

	<div class="row service-v1 margin-bottom-40" style="padding:-50px;">
            <div class="col-md-3 md-margin-bottom-40">
            </div>
            <div class="col-md-3 md-margin-bottom-40">
                  <img class="img-responsive" src="/static/images/resource/course13.jpg" alt="">   
            </div>
             <div class="col-md-3 md-margin-bottom-40">
                   <h3 th:text="${room.name}">Mobile Development</h3>
                   <p> 课程描述 </p> 
                <p>  <span th:text="${room.descirption}">ipsums</span></p> 
                 <p> 报名人数</p> 
               <p th:attr="id=${room.id+'num'}"  th:text="${room.num}">   <span ></span></p> 
                <p> 创建时间 </p> 
                 <p>   <span  th:text="${#dates.format(room.createdate,'yyyy-MM-dd')}">ipsums</span></p> 
                   <p> 课程类型</p>
                  <p>   <span  th:text="${room.type}">ipsums</span></p>
               <button type="button" id="Signup"  class="btn-success" th:attr="name=${room.id}"  style="" >报名</button>  
            </div>
            <div class="col-md-3 md-margin-bottom-40">
            
        </div>
		
		<footer>
			<div th:include="views/head/footer :: copyfooter"></div> 
		</footer><!-- Footer -->

		 <div  class="bottom-footer">
			<div th:include="views/head/bottom-footer :: bottom"></div> 
		</div><!-- Bottom Footer -->
		<!-- <input type="hidden" id="count" name="count" th:value="${count}"> -->
	</div>
		<div th:if="${session.user} != null">
		<input type="hidden" id="userid" name="userid" th:value="${session.user.id}">
		</div> 

	<script>
    $(function(){
    $("#Signup").click(function(){
		var userid=$('#userid').val();
		if(userid!=null&&userid>0){
		var id=$(this).attr('name');
		alert(id+'id');
		/* alert($(this).html()); */
		var userid=$("#userid").val();
		
		 if(userid!=null&&userid!=undefined){
				 $.ajax({ 
						    type:'post',  
						    url:'/signup_class', 
						    cache: false,
						   data:{"id":id,"userid":userid},
					       dataType: "json",
					    	 /* contentType: "application/json; charset=utf-8", */
						    success:function(data){
						    	if(data.state==1){
						    		 alert('报名 success');
						    		 var a='#'+id+'num';
						    		 var num=$(a).html();
						    		   /* document.write(str.split(" ",3)) */
						    		   num=data.num;
						    		 alert(num);
						    		 $(a).html(num);
						    	}else if(data.state==2){
						    		 alert('数量已满，停止报名');
						    	}else if(data.state==3){
						    		 alert('您已经报名了');
						    	}
						    },
						    error:function(){ 
						     alert("报名 error，Please check if the input is correct ")
						    }
				   })
					
					}else{
					location.href = 'courses.html?page=1&type='+name;
					
					}
		
		}else{
		 alert('未登录或是输入有误');
		setTimeout(function(){ window.open("login.html","_self"); }, 1000); 
		}
					
		
		})	
    
    
    });
</script>
</body>
</html>


